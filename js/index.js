import * as THREE from '../build/three.module.js'
import {BrightnessContrastShader} from '../examples/jsm/shaders/BrightnessContrastShader.js'
import {EffectComposer} from '../examples/jsm/postprocessing/EffectComposer.js'
import {FilmPass} from '../examples/jsm/postprocessing/FilmPass.js'
import {GlitchPass} from '../examples/jsm/postprocessing/GlitchPass.js'
import {GLTFLoader} from '../examples/jsm/loaders/GLTFLoader.js'
import {Lensflare, LensflareElement} from '../examples/jsm/objects/Lensflare.js'
import {OrbitControls} from '../examples/jsm/controls/OrbitControls.js'
import {OutlinePass} from '../examples/jsm/postprocessing/OutlinePass.js'
import {RenderPass} from '../examples/jsm/postprocessing/RenderPass.js'
import {RGBShiftShader} from '../examples/jsm/shaders/RGBShiftShader.js'
import {ShaderPass} from '../examples/jsm/postprocessing/ShaderPass.js'
var glb_r=131.4,index=document.querySelector("#index"),scene=new THREE.Scene,perspective_camera=new THREE.PerspectiveCamera(90,window.innerWidth/window.innerHeight,.1,4E3),update$0=function(){perspective_camera.position.y=0;var a=Math.sign(perspective_camera.position.z)*Math.acos(perspective_camera.position.x/Math.sqrt(Math.pow(perspective_camera.position.x,2)+Math.pow(perspective_camera.position.z,2)));perspective_camera.position.x=r*Math.cos(a);perspective_camera.position.z=r*Math.sin(a);perspective_camera.lookAt(r*Math.cos(a+1.5),0,r*Math.sin(a+1.5));requestAnimationFrame(update$0)},r=137.6,theta=-1;perspective_camera.position.set(r*Math.cos(theta),0,r*Math.sin(theta));perspective_camera.lookAt(r*Math.cos(theta+1.5),0,r*Math.sin(theta+1.5));requestAnimationFrame(update$0);var web_gl_renderer=new THREE.WebGLRenderer({canvas:index,antialias:!0});web_gl_renderer.setSize(index.clientWidth*window.devicePixelRatio,index.clientHeight*window.devicePixelRatio,!1);document.body.appendChild(web_gl_renderer.domElement);var objects={},effect_composer=new EffectComposer(web_gl_renderer);effect_composer.setSize(web_gl_renderer.domElement.clientWidth*window.devicePixelRatio,web_gl_renderer.domElement.clientHeight*window.devicePixelRatio);var render_pass=new RenderPass(scene,perspective_camera);objects.render_pass=render_pass;effect_composer.addPass(render_pass);var orbit_controls=new OrbitControls(perspective_camera,index);orbit_controls.enablePan=!1;orbit_controls.enableZoom=!1;orbit_controls.enableDamping=!0;orbit_controls.autoRotate=!0;var texture_loader=new THREE.TextureLoader,texture=texture_loader.load("../resources/images/background.jpg",function(){var a=new THREE.WebGLCubeRenderTarget(texture.image.height);a.fromEquirectangularTexture(web_gl_renderer,texture);objects.background=a.texture;scene.background=a.texture}),sun_light=new THREE.PointLight(16772045,2),r$1=2E3,theta$2=90*Math.PI/180;sun_light.position.set(r$1*Math.cos(theta$2),0,r$1*Math.sin(theta$2));objects.sun_light=sun_light;scene.add(sun_light);var texture_loader$3=new THREE.TextureLoader,texture_0=texture_loader$3.load("../examples/textures/lensflare/lensflare0.png",function(){var a=texture_loader$3.load("../examples/textures/lensflare/lensflare2.png",function(){var b=texture_loader$3.load("../examples/textures/lensflare/lensflare3.png",function(){var e=new Lensflare;e.addElement(new LensflareElement(texture_0,500,0,objects.sun_light.color));e.addElement(new LensflareElement(a,1E3,.1,objects.sun_light.color));e.addElement(new LensflareElement(b,100,.5));e.addElement(new LensflareElement(b,120,.6));e.addElement(new LensflareElement(b,180,.9));e.addElement(new LensflareElement(b,100,1));objects.lensflare=e;objects.sun_light.add(e)})})}),update$4=function(){"lensflare"in objects&&(objects.lensflare.visible=.9>Math.random()?!0:!1);requestAnimationFrame(update$4)};requestAnimationFrame(update$4);var texture_loader$5=new THREE.TextureLoader,r$6=1E3,theta$7=-90*Math.PI/180,texture$8=texture_loader$5.load("../examples/textures/planets/moon_1024.jpg",function(){var a=new THREE.SphereGeometry(27.3),b=new THREE.MeshLambertMaterial({map:texture$8});a=new THREE.Mesh(a,b);a.position.set(r$6*Math.cos(theta$7),0,r$6*Math.sin(theta$7));objects.moon=a;scene.add(a)}),moon_light=new THREE.PointLight(16777215,2);moon_light.position.set(r$6*Math.cos(theta$7),0,r$6*Math.sin(theta$7));objects.moon_light=moon_light;scene.add(moon_light);var texture_loader$9=new THREE.TextureLoader,texture$11=texture_loader$9.load("../resources/images/earth.jpg",function(){var a=new THREE.SphereGeometry(100,32,32),b=new THREE.MeshLambertMaterial({map:texture$11});a=new THREE.Mesh(a,b);a.rotation.x=-23.4*Math.PI/180;objects.earth=a;scene.add(a);var e=texture_loader$9.load("../examples/textures/planets/earth_clouds_1024.png",function(){var d=new THREE.SphereGeometry(101.3,32,32),c=new THREE.MeshLambertMaterial({map:e,transparent:!0,side:THREE.DoubleSide});d=new THREE.Mesh(d,c);objects.cloud=d;objects.earth.add(d)})}),update$12=function(){60<=clock.getElapsedTime()&&clock.start();var a=clock.getElapsedTime();"cloud"in objects&&(objects.cloud.rotation.y=a/60*2*Math.PI);requestAnimationFrame(update$12)},clock=new THREE.Clock;requestAnimationFrame(update$12);var gltf_loader=new GLTFLoader;gltf_loader.load("../resources/glb/sentinel6.glb",function(a){var b=0*Math.PI/180;a.scene.position.set(glb_r*Math.cos(b),0,glb_r*Math.sin(b));objects.bio_glb=a.scene;scene.add(a.scene);var e=new OutlinePass(new THREE.Vector2(web_gl_renderer.domElement.clientWidth,web_gl_renderer.domElement.clientHeight),scene,perspective_camera);web_gl_renderer.domElement.addEventListener("pointermove",function(d){var c=new THREE.Raycaster;c.setFromCamera(new THREE.Vector2(d.clientX/web_gl_renderer.domElement.clientWidth*2-1,-d.clientY/web_gl_renderer.domElement.clientHeight*2+1),perspective_camera);d=[];c=c.intersectObject(scene,!0);0<c.length&&c[0].object.parent.parent==a.scene&&d.push(c[0].object);e.selectedObjects=d});objects.bio_outline_pass=e;effect_composer.addPass(e)});var texture_loader$13=new THREE.TextureLoader,texture$14=texture_loader$13.load("../resources/images/bio.jpg",function(){var a=new THREE.SpriteMaterial({map:texture$14});a=new THREE.Sprite(a);var b=0*Math.PI/180;a.position.set(glb_r*Math.cos(b),6.6,glb_r*Math.sin(b));a.scale.set(6.6,6.6,6.6);objects.bio_sprite=a;scene.add(a)});web_gl_renderer.domElement.addEventListener("click",function(a){var b=new THREE.Raycaster;b.setFromCamera(new THREE.Vector2(a.clientX/web_gl_renderer.domElement.clientWidth*2-1,-a.clientY/web_gl_renderer.domElement.clientHeight*2+1),perspective_camera);a=b.intersectObject(scene,!0);0<a.length&&("bio_glb"in objects&&a[0].object.parent.parent==objects.bio_glb||"bio_sprite"in objects&&a[0].object==objects.bio_sprite)&&(location="./bio.html")});var update$15=function(){4<=clock$16.getElapsedTime()&&clock$16.start();var a=clock$16.getElapsedTime();"bio_glb"in objects&&objects.bio_glb.rotation.set(a/4*2*Math.PI,a/4*2*Math.PI,a/4*2*Math.PI);requestAnimationFrame(update$15)},clock$16=new THREE.Clock;requestAnimationFrame(update$15);var gltf_loader$17=new GLTFLoader;gltf_loader$17.load("../resources/glb/icesat2.glb",function(a){var b=90*Math.PI/180;a.scene.position.set(glb_r*Math.cos(b),0,glb_r*Math.sin(b));objects.twitter_glb=a.scene;scene.add(a.scene);var e=new OutlinePass(new THREE.Vector2(web_gl_renderer.domElement.clientWidth,web_gl_renderer.domElement.clientHeight),scene,perspective_camera);web_gl_renderer.domElement.addEventListener("pointermove",function(d){var c=new THREE.Raycaster;c.setFromCamera(new THREE.Vector2(d.clientX/web_gl_renderer.domElement.clientWidth*2-1,-d.clientY/web_gl_renderer.domElement.clientHeight*2+1),perspective_camera);d=[];c=c.intersectObject(scene,!0);0<c.length&&c[0].object.parent.parent==a.scene&&d.push(c[0].object);e.selectedObjects=d});objects.twitter_outline_pass=e;effect_composer.addPass(e)});var texture_loader$18=new THREE.TextureLoader,texture$19=texture_loader$18.load("../resources/images/twitter.png",function(){var a=new THREE.SpriteMaterial({map:texture$19});a=new THREE.Sprite(a);var b=90*Math.PI/180;a.position.set(glb_r*Math.cos(b),6.6,glb_r*Math.sin(b));a.scale.set(6.6,6.6,6.6);objects.twitter_sprite=a;scene.add(a)}),film_pass=new FilmPass;film_pass.uniforms.sIntensity.value=.5;film_pass.uniforms.sCount.value=2E3;film_pass.uniforms.grayscale=!1;film_pass.enabled=!1;objects.film_pass=film_pass;effect_composer.addPass(film_pass);web_gl_renderer.domElement.addEventListener("click",function(a){var b=new THREE.Raycaster;b.setFromCamera(new THREE.Vector2(a.clientX/web_gl_renderer.domElement.clientWidth*2-1,-a.clientY/web_gl_renderer.domElement.clientHeight*2+1),perspective_camera);a=b.intersectObject(scene,!0);0<a.length&&("twitter_glb"in objects&&a[0].object.parent.parent==objects.twitter_glb||"twitter_sprite"in objects&&a[0].object==objects.twitter_sprite)&&(window.open("https://twitter.com/mcpu3_kei/"),objects.film_pass.enabled=!0)});var update$20=function(){4<=clock$21.getElapsedTime()&&clock$21.start();var a=clock$21.getElapsedTime();"twitter_glb"in objects&&objects.twitter_glb.rotation.set(a/4*2*Math.PI,a/4*2*Math.PI,a/4*2*Math.PI);requestAnimationFrame(update$20)},clock$21=new THREE.Clock;requestAnimationFrame(update$20);var gltf_loader$22=new GLTFLoader;gltf_loader$22.load("../resources/glb/cloudsat.glb",function(a){var b=180*Math.PI/180;a.scene.position.set(glb_r*Math.cos(b),0,glb_r*Math.sin(b));objects.github_glb=a.scene;scene.add(a.scene);var e=new OutlinePass(new THREE.Vector2(web_gl_renderer.domElement.clientWidth,web_gl_renderer.domElement.clientHeight),scene,perspective_camera);web_gl_renderer.domElement.addEventListener("pointermove",function(d){var c=new THREE.Raycaster;c.setFromCamera(new THREE.Vector2(d.clientX/web_gl_renderer.domElement.clientWidth*2-1,-d.clientY/web_gl_renderer.domElement.clientHeight*2+1),perspective_camera);d=[];c=c.intersectObject(scene,!0);0<c.length&&c[0].object.parent.parent==a.scene&&d.push(c[0].object);e.selectedObjects=d});objects.github_outline_pass=e;effect_composer.addPass(e)});var texture_loader$23=new THREE.TextureLoader,texture$24=texture_loader$23.load("../resources/images/github.png",function(){var a=new THREE.SpriteMaterial({map:texture$24});a=new THREE.Sprite(a);var b=180*Math.PI/180;a.position.set(glb_r*Math.cos(b),6.6,glb_r*Math.sin(b));a.scale.set(6.6,6.6,6.6);objects.github_sprite=a;scene.add(a)}),clicked=!1;web_gl_renderer.domElement.addEventListener("click",function(a){var b=new THREE.Raycaster;b.setFromCamera(new THREE.Vector2(a.clientX/window.innerWidth*2-1,-a.clientY/window.innerHeight*2+1),perspective_camera);a=b.intersectObject(scene,!0);0<a.length&&("github_glb"in objects&&a[0].object.parent.parent==objects.github_glb||"github_sprite"in objects&&a[0].object==objects.github_sprite)&&(window.open("https://github.com/Mcpu3/"),clicked||(clicked=!0,a=new ShaderPass(RGBShiftShader),a.enabled=!1,objects.shader_pass_rgb_shift_shader=a,effect_composer.addPass(a)))});var update$25=function(){4<=clock$26.getElapsedTime()&&clock$26.start();var a=clock$26.getElapsedTime();"github_glb"in objects&&objects.github_glb.rotation.set(a/4*2*Math.PI,a/4*2*Math.PI,a/4*2*Math.PI);"shader_pass_rgb_shift_shader"in objects&&(objects.shader_pass_rgb_shift_shader.enabled=.1>Math.random()?!0:!1);requestAnimationFrame(update$25)},clock$26=new THREE.Clock;requestAnimationFrame(update$25);var gltf_loader$27=new GLTFLoader;gltf_loader$27.load("../resources/glb/mkiii.glb",function(a){var b=270*Math.PI/180;a.scene.position.set(glb_r*Math.cos(b),0,glb_r*Math.sin(b));objects.easteregg_glb=a.scene;scene.add(a.scene);var e=new OutlinePass(new THREE.Vector2(web_gl_renderer.domElement.clientWidth,web_gl_renderer.domElement.clientHeight),scene,perspective_camera);web_gl_renderer.domElement.addEventListener("pointermove",function(d){var c=new THREE.Raycaster;c.setFromCamera(new THREE.Vector2(d.clientX/web_gl_renderer.domElement.clientWidth*2-1,-d.clientY/web_gl_renderer.domElement.clientHeight*2+1),perspective_camera);d=[];c=c.intersectObject(scene,!0);0<c.length&&c[0].object.parent.parent==a.scene&&d.push(c[0].object);e.selectedObjects=d});objects.easteregg_outline_pass=e;effect_composer.addPass(e)});var texture_loader$28=new THREE.TextureLoader,texture$29=texture_loader$28.load("../resources/images/easteregg.jpg",function(){var a=new THREE.SpriteMaterial({map:texture$29});a=new THREE.Sprite(a);var b=270*Math.PI/180;a.position.set(glb_r*Math.cos(b),6.6,glb_r*Math.sin(b));a.scale.set(6.6,6.6,6.6);objects.easteregg_sprite=a;scene.add(a)}),clicked$30=!1;web_gl_renderer.domElement.addEventListener("click",function(a){function b(){var f=h.getElapsedTime();0<=f&&.5>f?(objects.easteregg_glb.scale.set(d.x*Math.cos(f*Math.PI),d.y*Math.cos(f*Math.PI),d.z*Math.cos(f*Math.PI)),objects.easteregg_sprite.scale.set(c.x*Math.cos(f*Math.PI),c.y*Math.cos(f*Math.PI),c.z*Math.cos(f*Math.PI))):(objects.easteregg_glb.visible=!1,objects.easteregg_sprite.visible=!1);0<=f&&.2>f?(objects.earth.visible=!1,objects.earth_wireframe.visible=!0):.2<=f&&.3>f?(objects.earth.visible=!0,objects.earth_wireframe.visible=!1):.3<=f&&.4>f?(objects.earth.visible=!1,objects.earth_wireframe.visible=!0):(objects.earth.visible=!0,objects.earth_wireframe.visible=!1);4<=f&&(g.goWild=!0,objects.shader_pass_brightness_contrast.enabled=!0,.1>Math.random()?(objects.earth.visible=!1,objects.earth_wireframe.visible=!0):(objects.earth.visible=!0,objects.earth_wireframe.visible=!1));requestAnimationFrame(b)}var e=new THREE.Raycaster;e.setFromCamera(new THREE.Vector2(a.clientX/web_gl_renderer.domElement.clientWidth*2-1,-a.clientY/web_gl_renderer.domElement.clientHeight*2+1),perspective_camera);a=e.intersectObject(scene,!0);if(0<a.length&&("easteregg_glb"in objects&&a[0].object.parent.parent==objects.easteregg_glb||"easteregg_sprite"in objects&&a[0].object==objects.easteregg_sprite)&&"earth"in objects&&!clicked$30){clicked$30=!0;var d=objects.easteregg_glb.scale,c=objects.easteregg_sprite.scale;a=new THREE.WireframeGeometry(objects.earth.geometry);e=new THREE.LineBasicMaterial;a=new THREE.LineSegments(a,e);a.rotation.z=-23.4*Math.PI/180;a.visible=!1;objects.earth_wireframe=a;scene.add(a);var g=new GlitchPass;objects.glitch_pass=g;effect_composer.addPass(g);a=new ShaderPass(BrightnessContrastShader);a.uniforms.brightness.value=-.5;a.enabled=!1;objects.shader_pass_brightness_contrast=a;effect_composer.addPass(a);var h=new THREE.Clock;requestAnimationFrame(b)}});var update$31=function(){4<=clock$32.getElapsedTime()&&clock$32.start();var a=clock$32.getElapsedTime();"easteregg_glb"in objects&&objects.easteregg_glb.rotation.set(a/4*2*Math.PI,a/4*2*Math.PI,a/4*2*Math.PI);requestAnimationFrame(update$31)},clock$32=new THREE.Clock;requestAnimationFrame(update$31);objects.natural_satellites=[];for(var sphere_buffer_geometry=new THREE.SphereBufferGeometry(3,3,3),i=0;2E3>i;i++){var mesh_phong_material=new THREE.MeshPhongMaterial({color:6710886,flatShading:!0}),natural_satellite=new THREE.Mesh(sphere_buffer_geometry,mesh_phong_material);natural_satellite.position.set(4E3*Math.random()-2E3,4E3*Math.random()-2E3,4E3*Math.random()-2E3);natural_satellite.rotation.set(2*Math.random()*Math.PI,2*Math.random()*Math.PI,2*Math.random()*Math.PI);natural_satellite.scale.x=natural_satellite.scale.y=natural_satellite.scale.z=Math.random();objects.natural_satellites.push(natural_satellite);scene.add(natural_satellite)}function update(){perspective_camera.aspect=web_gl_renderer.domElement.clientWidth/web_gl_renderer.domElement.clientHeight;perspective_camera.updateProjectionMatrix();effect_composer.setSize(web_gl_renderer.domElement.clientWidth*window.devicePixelRatio,web_gl_renderer.domElement.clientHeight*window.devicePixelRatio);web_gl_renderer.render(scene,perspective_camera);effect_composer.render();orbit_controls.update();requestAnimationFrame(update)}requestAnimationFrame(update);