function main(){var a=new Wordle;a=new Solver(a);new WordleSolver(a)}var WordleSolver=function(a){this.guess="tares";this.solver=a;this.init_ui();this.add_event_listeners()};WordleSolver.prototype.add_event_listeners=function(){var a=this;document.getElementById("solve").addEventListener("click",function(){a.solve()});document.getElementById("resolve").addEventListener("click",function(){a.resolve()});document.getElementById("reset").addEventListener("click",function(){a.reset()})};
WordleSolver.prototype.init=function(){this.guess="tares";this.solver.init();this.init_ui()};WordleSolver.prototype.solve=function(){var a=document.getElementById("result").value.toString();this.foolproof_of_result(a)&&(this.solver.wordle.submit(this.guess,a),this.guess=this.solver.solve(),this.init_ui())};WordleSolver.prototype.foolproof_of_result=function(a){if(a.match(/[012]{5}/)&&a.match(/[012]{5}/)[0]===a)return this.set_result_input_color(),!0;this.set_result_input_color(!0);return!1};
WordleSolver.prototype.resolve=function(){this.guess=this.solver.solve();this.init_ui()};WordleSolver.prototype.reset=function(){this.init()};WordleSolver.prototype.init_ui=function(){document.getElementById("guess").innerText="";this.guess&&(document.getElementById("guess").innerText=this.guess.toUpperCase());document.getElementById("result").value="";document.getElementById("number_of_valid_corrects").innerText=this.solver.wordle.valid_corrects.length;this.set_result_input_color()};
WordleSolver.prototype.set_result_input_color=function(a){a=void 0===a?!1:a;document.getElementById("result").className="input";document.getElementById("result_help").className="help";a&&(document.getElementById("result").className="input is-danger",document.getElementById("result_help").className="help is-danger")};var Solver=function(a){this.wordle=a};Solver.prototype.init=function(){this.wordle.init()};
Solver.prototype.solve=function(){var a=void 0;0<this.wordle.valid_corrects.length&&(1<this.wordle.valid_corrects.length?(a=this.calculate_sorted_guesses_by_entropy(),a=a[Math.floor((Math.min(a.length,10)-1)*Math.random())]):a=this.wordle.valid_corrects[0]);return a};
Solver.prototype.calculate_sorted_guesses_by_entropy=function(){var a=this,d=[],b=[];this.wordle.valid_guesses.forEach(function(c){b.push([c,a.calculate_entropy(c)])});b.sort(function(c,e){return e[1]-c[1]});b.forEach(function(c){d.push(c[0])});return d};
Solver.prototype.calculate_entropy=function(a){var d=this,b={};this.wordle.valid_corrects.forEach(function(e){e=d.wordle.judge(a,e);b[e]=e in b?b[e]+1:1});var c=[];Object.values(b).forEach(function(e){c.push(e*Math.log2(e))});return-c.reduce(function(e,f){return e+f},0)};var Wordle=function(){this.valid_corrects=this.valid_guesses=this.words=words};Wordle.prototype.init=function(){this.valid_corrects=this.valid_guesses=this.words=words};
Wordle.prototype.submit=function(a,d){this.update_valid_guesses(a);this.update_valid_corrects(a,d)};Wordle.prototype.judge=function(a,d){for(var b="",c=0;c<Math.min(a.length,d.length);c++)b=d.includes(a[c])?a[c]===d[c]?b+"0":b+"1":b+"2";return b};Wordle.prototype.update_valid_guesses=function(a){var d=[];this.valid_guesses.forEach(function(b){b!==a&&d.push(b)});this.valid_guesses=d};
Wordle.prototype.update_valid_corrects=function(a,d){var b=this,c=[];this.valid_corrects.forEach(function(e){b.judge(a,e)===d&&c.push(e)});this.valid_corrects=c};main();